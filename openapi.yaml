openapi: 3.1.0

info:
  title: OnlyFans API Dashboard - Complete API Documentation
  description: >
    Complete API documentation for the OnlyFans API Dashboard platform.
    
    ## Getting Started
    
    1. **Register and Login** - Create an account and authenticate
    2. **Create Organization** - Set up your organization workspace
    3. **Create API Keys** - Generate API keys for accessing OnlyFans data
    4. **Access OnlyFans APIs** - Use your organization ID and API keys to fetch data
    
    ## Authentication
    
    This API uses multiple authentication methods:
    - **Bearer Token**: For user authentication (obtain via login)
    - **X-API-Key**: For API key authentication (use generated API keys)
    
    ## API Sections
    
    - **Organizations**: Manage organizations, team members, and settings
    - **API Keys**: Create, manage, and secure API keys for your organization
    - **OnlyFans**: Access OnlyFans model data, analytics, and statistics
  version: 1.0.0
  termsOfService: https://yourdomain.com/terms
  contact:
    email: support@yourdomain.com
    url: https://yourdomain.com/support
  license:
    name: Proprietary
    url: https://yourdomain.com/license

servers:
  - url: https://api.yourdomain.com/api/v1
    description: Production server
  - url: http://localhost:3000/api/v1
    description: Development server

# =============================================================================
# ORGANIZATION MANAGEMENT APIs
# =============================================================================

paths:
  /organizations:
    get:
      summary: List Organizations
      description: Get paginated list of organizations for the authenticated user
      operationId: listOrganizations
      tags: [Organizations]
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number for pagination
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: Number of items per page
      responses:
        "200":
          description: Organizations retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Organizations retrieved successfully"
                  data:
                    $ref: "#/components/schemas/PaginatedOrganizationListResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "500":
          $ref: "#/components/responses/InternalServerError"

    post:
      summary: Create Organization
      description: Create a new organization
      operationId: createOrganization
      tags: [Organizations]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 100
                  example: "My Company"
                description:
                  type: string
                  maxLength: 500
                  example: "Content management organization"
                logo:
                  type: string
                  format: uri
                  example: "https://example.com/logo.png"
                settings:
                  type: object
                  description: Additional organization settings
      responses:
        "201":
          description: Organization created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Organization created successfully"
                  data:
                    $ref: "#/components/schemas/OrganizationResponse"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "422":
          description: Validation error (name already exists)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          $ref: "#/components/responses/InternalServerError"

  /organizations/switch:
    post:
      summary: Switch Active Organization
      description: Switch the active organization context
      operationId: switchOrganization
      tags: [Organizations]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - organizationId
              properties:
                organizationId:
                  type: string
                  example: "org_1234567890"
      responses:
        "200":
          description: Organization switched successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Organization switched successfully"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Access denied to organization
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          $ref: "#/components/responses/InternalServerError"

  /organizations/{id}:
    get:
      summary: Get Organization
      description: Get organization details
      operationId: getOrganization
      tags: [Organizations]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          example: org_1234567890
      responses:
        "200":
          description: Organization details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Organization retrieved successfully"
                  data:
                    $ref: "#/components/schemas/OrganizationResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          description: Organization not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          $ref: "#/components/responses/InternalServerError"

    put:
      summary: Update Organization
      description: Update organization details (Admin only)
      operationId: updateOrganization
      tags: [Organizations]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          example: org_1234567890
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 100
                  example: "Updated Company Name"
                description:
                  type: string
                  maxLength: 500
                  example: "Updated description"
                logo:
                  type: string
                  format: uri
                  example: "https://example.com/new-logo.png"
                settings:
                  type: object
                  description: Updated organization settings
      responses:
        "200":
          description: Organization updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Organization updated successfully"
                  data:
                    $ref: "#/components/schemas/OrganizationResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Admin access required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Organization not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          $ref: "#/components/responses/InternalServerError"

    delete:
      summary: Deactivate Organization
      description: Deactivate organization (Admin only)
      operationId: deactivateOrganization
      tags: [Organizations]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          example: org_1234567890
      responses:
        "200":
          description: Organization deactivated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Organization deactivated successfully"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Admin access required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Organization not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          $ref: "#/components/responses/InternalServerError"

  /organizations/{id}/invite:
    post:
      summary: Invite User to Organization
      description: Invite a user to join the organization (Admin only)
      operationId: inviteUserToOrganization
      tags: [Organizations]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          example: org_1234567890
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  format: email
                  example: "user@example.com"
                role:
                  type: string
                  enum: [USER, ADMIN]
                  default: USER
                  example: "USER"
      responses:
        "200":
          description: User invited successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "User invited successfully"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Admin access required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Organization not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          $ref: "#/components/responses/InternalServerError"

# =============================================================================
# API KEYS MANAGEMENT APIs
# =============================================================================

  /api-keys:
    get:
      summary: List API Keys
      description: Get paginated API keys for the authenticated user. If organizationId is provided, returns keys for that organization, otherwise returns keys for all organizations the user has access to.
      operationId: listApiKeys
      tags: [API Keys]
      security:
        - bearerAuth: []
      parameters:
        - name: organizationId
          in: query
          schema:
            type: string
          description: Optional organization ID to filter API keys by specific organization
          example: org_1234567890
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number for pagination
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: Number of items per page
      responses:
        "200":
          description: API keys retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "API keys retrieved successfully"
                  data:
                    $ref: "#/components/schemas/PaginatedApiKeyListResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Access denied to specified organization
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          $ref: "#/components/responses/InternalServerError"

    post:
      summary: Create API Key
      description: Create a new API key for the specified organization
      operationId: createApiKey
      tags: [API Keys]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - organizationId
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 100
                  example: "Production API Key"
                organizationId:
                  type: string
                  description: ID of the organization to create the API key for
                  example: "org_1234567890"
                permissions:
                  type: object
                  description: API permissions configuration
                  example: {"read": true, "write": false}
                rateLimit:
                  type: integer
                  minimum: 1
                  default: 1000
                  example: 1000
                expiresAt:
                  type: string
                  format: date-time
                  example: "2024-12-31T23:59:59.000Z"
      responses:
        "201":
          description: API key created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "API key created successfully"
                  data:
                    $ref: "#/components/schemas/ApiKeyWithPlainKey"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Access denied to specified organization
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "422":
          description: Validation error (name already exists)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          $ref: "#/components/responses/InternalServerError"

  /api-keys/{id}:
    get:
      summary: Get API Key
      description: Get details of a specific API key
      operationId: getApiKey
      tags: [API Keys]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          example: key_1234567890
      responses:
        "200":
          description: API key details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "API key retrieved successfully"
                  data:
                    $ref: "#/components/schemas/ApiKeyResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Access denied to API key
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: API key not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          $ref: "#/components/responses/InternalServerError"

    put:
      summary: Update API Key
      description: Update an existing API key
      operationId: updateApiKey
      tags: [API Keys]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          example: key_1234567890
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 100
                  example: "Updated API Key Name"
                permissions:
                  type: object
                  description: Updated API permissions
                  example: {"read": true, "write": true}
                rateLimit:
                  type: integer
                  minimum: 1
                  example: 2000
                expiresAt:
                  type: string
                  format: date-time
                  example: "2025-12-31T23:59:59.000Z"
      responses:
        "200":
          description: API key updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "API key updated successfully"
                  data:
                    $ref: "#/components/schemas/ApiKeyResponse"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Access denied to API key
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: API key not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          $ref: "#/components/responses/InternalServerError"

    delete:
      summary: Delete API Key
      description: Permanently revoke an API key
      operationId: deleteApiKey
      tags: [API Keys]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          example: key_1234567890
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                organizationId:
                  type: string
                  description: Optional organization ID to delete API key from specific organization
                  example: "org_1234567890"
      responses:
        "200":
          description: API key deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "API key deleted successfully"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Access denied to API key
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: API key not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          $ref: "#/components/responses/InternalServerError"

  /api-keys/{id}/enable:
    post:
      summary: Enable API Key
      description: Enable a previously disabled API key
      operationId: enableApiKey
      tags: [API Keys]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          example: key_1234567890
      responses:
        "200":
          description: API key enabled successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "API key enabled successfully"
                  data:
                    $ref: "#/components/schemas/ApiKeyResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Access denied to API key
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: API key not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          $ref: "#/components/responses/InternalServerError"

  /api-keys/{id}/disable:
    post:
      summary: Disable API Key
      description: Temporarily disable an API key
      operationId: disableApiKey
      tags: [API Keys]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          example: key_1234567890
      responses:
        "200":
          description: API key disabled successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "API key disabled successfully"
                  data:
                    $ref: "#/components/schemas/ApiKeyResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Access denied to API key
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: API key not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          $ref: "#/components/responses/InternalServerError"

  /api-keys/{id}/regenerate:
    post:
      summary: Regenerate API Key
      description: Generate a new API key secret while keeping the same settings
      operationId: regenerateApiKey
      tags: [API Keys]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          example: key_1234567890
      responses:
        "200":
          description: API key regenerated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "API key regenerated successfully"
                  data:
                    $ref: "#/components/schemas/ApiKeyWithPlainKey"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Access denied to API key
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: API key not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          $ref: "#/components/responses/InternalServerError"

# =============================================================================
# ONLYFANS APIs (using your existing spec)
# =============================================================================

  /onlyfans/organizations/{orgId}/models:
    get:
      summary: Get organization models
      description: Retrieve all models associated with a specific organization.
      operationId: getOrganizationModels
      tags: [OnlyFans - Organizations]
      parameters:
        - name: orgId
          in: path
          required: true
          schema:
            type: string
          description: Organization ID
          example: org_1234567890
      responses:
        "200":
          description: Organization models retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "500":
          $ref: "#/components/responses/InternalServerError"

    post:
      summary: Process organization models
      description: Create or update models for a specific organization.
      operationId: postOrganizationModels
      tags: [OnlyFans - Organizations]
      parameters:
        - name: orgId
          in: path
          required: true
          schema:
            type: string
          description: Organization ID
          example: org_1234567890
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        "200":
          description: Models processed successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse"

  /onlyfans/models/{modelId}/reconnect:
    post:
      summary: Reconnect model
      description: Reconnect and refresh the model data connection.
      operationId: reconnectModel
      tags: [OnlyFans - Models]
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
          description: Model ID
          example: model_1234567890
      responses:
        "200":
          description: Model reconnected successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse"

  /onlyfans/models/{modelId}/users/me:
    get:
      summary: Get model details
      description: Retrieve detailed information for a specific model.
      operationId: getModelDetails
      tags: [OnlyFans - Models]
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
          description: Model ID
          example: model_1234567890
      responses:
        "200":
          description: Model details retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse"

  /onlyfans/models/{modelId}/fans/info:
    get:
      summary: Get fan details
      description: Retrieve detailed information about a specific fan.
      operationId: getFanDetails
      tags: [OnlyFans - Fans]
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
          description: Model ID
          example: model_1234567890
        - name: user_id
          in: query
          required: true
          description: Unique identifier of the fan
          schema:
            type: string
          example: fan_1234567890
      responses:
        "200":
          description: Fan details retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse"

  /onlyfans/models/{modelId}/chats:
    get:
      summary: Get model chats
      description: Retrieve chat conversations for a model with pagination.
      operationId: getModelChats
      tags: [OnlyFans - Chats]
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
          description: Model ID
          example: model_1234567890
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
          example: 20
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
          example: 0
      responses:
        "200":
          description: Chats retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse"

  /onlyfans/models/{modelId}/chats/{chatId}/messages:
    get:
      summary: Get chat messages
      description: Retrieve messages from a specific chat conversation.
      operationId: getChatMessages
      tags: [OnlyFans - Chats]
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
          description: Model ID
          example: model_1234567890
        - name: chatId
          in: path
          required: true
          schema:
            type: string
          description: Chat ID
          example: chat_1234567890
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
          example: 50
      responses:
        "200":
          description: Chat messages retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse"

  /onlyfans/models/{modelId}/payouts/transactions:
    get:
      summary: Get payout transactions
      description: Retrieve payout transaction history for a model.
      operationId: getModelPayoutTransactions
      tags: [OnlyFans - Payouts]
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
          description: Model ID
          example: model_1234567890
      responses:
        "200":
          description: Payout transactions retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse"

  /onlyfans/models/{modelId}/payouts/statistics:
    get:
      summary: Get payout statistics
      description: Retrieve payout statistics within a date range.
      operationId: getModelPayoutStats
      tags: [OnlyFans - Payouts]
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
          description: Model ID
          example: model_1234567890
        - name: startDate
          in: query
          schema:
            type: string
            format: date
          description: Start date for statistics
          example: "2024-01-01"
        - name: endDate
          in: query
          schema:
            type: string
            format: date
          description: End date for statistics
          example: "2024-01-31"
      responses:
        "200":
          description: Payout statistics retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse"

  /onlyfans/models/{modelId}/payouts/requests/referral:
    get:
      summary: Get payout referral requests
      description: Retrieve referral-based payout requests for a model.
      operationId: getModelPayoutReferralRequests
      tags: [OnlyFans - Payouts]
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
          description: Model ID
          example: model_1234567890
      responses:
        "200":
          description: Referral payout requests retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse"

  /onlyfans/models/{modelId}/statistics/balances:
    get:
      summary: Get payout balances
      description: Retrieve current payout balances for a model.
      operationId: getModelPayoutBalances
      tags: [OnlyFans - Statistics]
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
          description: Model ID
          example: model_1234567890
      responses:
        "200":
          description: Payout balances retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse"

  /onlyfans/models/{modelId}/statistics/overview:
    get:
      summary: Get statistics overview
      description: Retrieve overall performance statistics for a model.
      operationId: getModelStatsOverview
      tags: [OnlyFans - Statistics]
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
          description: Model ID
          example: model_1234567890
        - name: startDate
          in: query
          schema:
            type: string
            format: date
          description: Start date for statistics
          example: "2024-01-01"
        - name: endDate
          in: query
          schema:
            type: string
            format: date
          description: End date for statistics
          example: "2024-01-31"
      responses:
        "200":
          description: Statistics overview retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse"

  /onlyfans/models/{modelId}/stats/reach:
    get:
      summary: Get reach statistics
      description: Retrieve audience reach statistics for a model.
      operationId: getModelReachStats
      tags: [OnlyFans - Statistics]
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
          description: Model ID
          example: model_1234567890
        - name: startDate
          in: query
          schema:
            type: string
            format: date
          description: Start date for statistics
          example: "2024-01-01"
        - name: endDate
          in: query
          schema:
            type: string
            format: date
          description: End date for statistics
          example: "2024-01-31"
      responses:
        "200":
          description: Reach statistics retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse"

  /onlyfans/models/{modelId}/stats/reach/by-country:
    get:
      summary: Get reach statistics by country
      description: Retrieve reach statistics grouped by country.
      operationId: getModelReachStatsByCountry
      tags: [OnlyFans - Statistics]
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
          description: Model ID
          example: model_1234567890
        - name: startDate
          in: query
          schema:
            type: string
            format: date
          description: Start date for statistics
          example: "2024-01-01"
        - name: endDate
          in: query
          schema:
            type: string
            format: date
          description: End date for statistics
          example: "2024-01-31"
      responses:
        "200":
          description: Reach statistics by country retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse"

  /onlyfans/models/{modelId}/stats/fans:
    get:
      summary: Get fan statistics
      description: Retrieve fan-related statistics for a model.
      operationId: getModelFansStats
      tags: [OnlyFans - Statistics]
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
          description: Model ID
          example: model_1234567890
        - name: startDate
          in: query
          schema:
            type: string
            format: date
          description: Start date for statistics
          example: "2024-01-01"
        - name: endDate
          in: query
          schema:
            type: string
            format: date
          description: End date for statistics
          example: "2024-01-31"
      responses:
        "200":
          description: Fan statistics retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse"

  /onlyfans/models/{modelId}/stats/fans/top:
    get:
      summary: Get top fans
      description: Retrieve top fans for a model.
      operationId: getModelTopFans
      tags: [OnlyFans - Statistics]
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
          description: Model ID
          example: model_1234567890
        - name: startDate
          in: query
          schema:
            type: string
            format: date
          description: Start date for statistics
          example: "2024-01-01"
        - name: endDate
          in: query
          schema:
            type: string
            format: date
          description: End date for statistics
          example: "2024-01-31"
      responses:
        "200":
          description: Top fans retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse"

components:
  schemas:
    # Common Response Schemas
    ApiResponse:
      type: object
      required: [success, message]
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          type: object
        metadata:
          type: object
        statusCode:
          type: integer
        responseTime:
          type: number

    ErrorResponse:
      type: object
      required: [success, message, error, statusCode]
      properties:
        success:
          type: boolean
        message:
          type: string
        error:
          type: string
        statusCode:
          type: integer

    # Organization Schemas
    OrganizationResponse:
      type: object
      properties:
        id:
          type: string
          example: "org_1234567890"
        name:
          type: string
          example: "My Company"
        slug:
          type: string
          example: "my-company"
        description:
          type: string
          example: "Content management organization"
        logo:
          type: string
          format: uri
          example: "https://example.com/logo.png"
        status:
          type: string
          enum: [ACTIVE, INACTIVE, SUSPENDED]
          example: "ACTIVE"
        trialEndsAt:
          type: string
          format: date-time
          example: "2024-12-31T23:59:59.000Z"
        settings:
          type: object
          description: Organization settings
        memberCount:
          type: integer
          example: 5
        apiKeyCount:
          type: integer
          example: 3
        creditBalance:
          type: number
          example: 150.50
        members:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                example: "user_1234567890"
              name:
                type: string
                example: "John Doe"
              email:
                type: string
                format: email
                example: "john@example.com"
              role:
                type: string
                enum: [USER, ADMIN]
                example: "USER"
              joinedAt:
                type: string
                format: date-time
                example: "2024-01-15T10:30:00.000Z"
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T09:00:00.000Z"
        updatedAt:
          type: string
          format: date-time
          example: "2024-01-15T14:20:00.000Z"
        lastActivityAt:
          type: string
          format: date-time
          example: "2024-01-15T14:20:00.000Z"

    OrganizationListResponse:
      type: object
      properties:
        id:
          type: string
          example: "org_1234567890"
        name:
          type: string
          example: "My Company"
        slug:
          type: string
          example: "my-company"
        description:
          type: string
          example: "Content management organization"
        logo:
          type: string
          format: uri
          example: "https://example.com/logo.png"
        status:
          type: string
          enum: [ACTIVE, INACTIVE, SUSPENDED]
          example: "ACTIVE"
        role:
          type: string
          enum: [USER, ADMIN]
          example: "ADMIN"
        memberCount:
          type: integer
          example: 5
        apiKeyCount:
          type: integer
          example: 3
        creditBalance:
          type: number
          example: 150.50
        trialEndsAt:
          type: string
          format: date-time
          example: "2024-12-31T23:59:59.000Z"
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T09:00:00.000Z"
        joinedAt:
          type: string
          format: date-time
          example: "2024-01-01T09:00:00.000Z"

    PaginatedOrganizationListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/OrganizationListResponse"
        pagination:
          type: object
          properties:
            page:
              type: integer
              example: 1
            limit:
              type: integer
              example: 10
            total:
              type: integer
              example: 25
            totalPages:
              type: integer
              example: 3

    # API Key Schemas
    ApiKeyResponse:
      type: object
      properties:
        id:
          type: string
          example: "key_1234567890"
        name:
          type: string
          example: "Production API Key"
        prefix:
          type: string
          example: "of_prod_"
        status:
          type: string
          enum: [ACTIVE, DISABLED, REVOKED, EXPIRED]
          example: "ACTIVE"
        permissions:
          type: object
          description: API permissions configuration
          example: {"read": true, "write": false}
        rateLimit:
          type: integer
          example: 1000
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T09:00:00.000Z"
        lastUsedAt:
          type: string
          format: date-time
          example: "2024-01-15T14:20:00.000Z"
        expiresAt:
          type: string
          format: date-time
          example: "2024-12-31T23:59:59.000Z"

    ApiKeyWithPlainKey:
      allOf:
        - $ref: "#/components/schemas/ApiKeyResponse"
        - type: object
          properties:
            plainKey:
              type: string
              description: The full API key (only returned on creation)
              example: "of_prod_1234567890abcdef1234567890abcdef"

    ApiKeyListResponse:
      type: object
      properties:
        id:
          type: string
          example: "key_1234567890"
        name:
          type: string
          example: "Production API Key"
        prefix:
          type: string
          example: "of_prod_"
        status:
          type: string
          enum: [ACTIVE, DISABLED, REVOKED, EXPIRED]
          example: "ACTIVE"
        rateLimit:
          type: integer
          example: 1000
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T09:00:00.000Z"
        lastUsedAt:
          type: string
          format: date-time
          example: "2024-01-15T14:20:00.000Z"
        expiresAt:
          type: string
          format: date-time
          example: "2024-12-31T23:59:59.000Z"
        organizationId:
          type: string
          example: "org_1234567890"

    PaginatedApiKeyListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/ApiKeyListResponse"
        pagination:
          type: object
          properties:
            page:
              type: integer
              example: 1
            limit:
              type: integer
              example: 10
            total:
              type: integer
              example: 25
            totalPages:
              type: integer
              example: 3

  responses:
    BadRequest:
      description: Bad request
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"

    Unauthorized:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"

    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"

  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      description: Bearer token authentication (obtain via login)

    XApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
      description: External API key authentication (use generated API keys)

tags:
  - name: Organizations
    description: Organization management and team administration
  - name: API Keys
    description: API key creation, management, and security
  - name: OnlyFans - Organizations
    description: OnlyFans organization-specific operations
  - name: OnlyFans - Models
    description: OnlyFans model management and operations
  - name: OnlyFans - Fans
    description: OnlyFans fan data and analytics
  - name: OnlyFans - Chats
    description: OnlyFans chat and messaging operations
  - name: OnlyFans - Payouts
    description: OnlyFans payout and financial data
  - name: OnlyFans - Statistics
    description: OnlyFans performance and analytics data

security:
  - bearerAuth: []
    XApiKeyAuth: []
