openapi: 3.0.3
info:
  title: OnlyFans API Dashboard
  description: Multi-tenant API platform for managing OnlyFans integrations
  version: 1.0.0
  contact:
    name: Solution Squares

tags:
  - name: Organization
    description: üìÅ Organization management endpoints
  - name: API Keys
    description: üìÅ API key management endpoints
  - name: Models
    description: üìÅ Model management endpoints
  - name: Fans
    description: üìÅ Fan management endpoints
  - name: Messages
    description: üìÅ Message management endpoints
  - name: Statements
    description: üìÅ Earnings and financial data endpoints
  - name: My Profile
    description: üìÅ Profile management endpoints
  - name: Statistics
    description: üìÅ Statistics and analytics endpoints

servers:
  - url: http://localhost:3000/api/v1
    description: Development server
  - url: https://api.yourdomain.com/api/v1
    description: Production server

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
    apiKeyAuth:
      type: apiKey
      in: header
      name: Authorization

  schemas:
    Organization:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        status:
          type: string
        createdAt:
          type: string
          format: date-time

    ApiKey:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        prefix:
          type: string
        status:
          type: string
        createdAt:
          type: string
          format: date-time

    Model:
      type: object
      properties:
        id:
          type: string
        username:
          type: string
        displayName:
          type: string
        subscriberCount:
          type: integer
        lastActivity:
          type: string
          format: date-time

    Fan:
      type: object
      properties:
        id:
          type: string
        username:
          type: string
        displayName:
          type: string
        joinDate:
          type: string
          format: date-time
        totalSpent:
          type: number

    Chat:
      type: object
      properties:
        id:
          type: string
        withUser:
          $ref: '#/components/schemas/Fan'
        lastMessage:
          type: string
        unreadCount:
          type: integer

    Message:
      type: object
      properties:
        id:
          type: string
        text:
          type: string
        fromUser:
          type: string
        createdAt:
          type: string
          format: date-time

    Earnings:
      type: object
      properties:
        id:
          type: string
        amount:
          type: number
        currency:
          type: string
        status:
          type: string
        processedAt:
          type: string
          format: date-time

    Statistics:
      type: object
      properties:
        totalEarned:
          type: number
        subscriberCount:
          type: integer
        totalViews:
          type: integer
        engagementRate:
          type: number

security:
  - bearerAuth: []
  - apiKeyAuth: []

paths:
  # üìÅ Organization
  /organizations:
    get:
      tags: [Organization]
      summary: Get organizations
      description: Retrieve all organizations the authenticated user belongs to
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Organizations retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Organization'

    post:
      tags: [Organization]
      summary: Create organizations
      description: Create a new organization
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
              required:
                - name
      responses:
        '201':
          description: Organization created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Organization'

  /organizations/{id}:
    get:
      tags: [Organization]
      summary: Get organization by ID
      description: Retrieve a specific organization by ID
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Organization retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Organization'

    put:
      tags: [Organization]
      summary: Update organization
      description: Update an existing organization
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
      responses:
        '200':
          description: Organization updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Organization'

  # üìÅ API Keys
  /api-keys:
    get:
      tags: [API Keys]
      summary: Get all API keys
      description: Retrieve all API keys for the current organization
      security:
        - bearerAuth: []
      responses:
        '200':
          description: API keys retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/ApiKey'

    post:
      tags: [API Keys]
      summary: Create API keys
      description: Create a new API key for the organization
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
              required:
                - name
      responses:
        '201':
          description: API key created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    allOf:
                      - $ref: '#/components/schemas/ApiKey'
                      - type: object
                        properties:
                          plainKey:
                            type: string

  # üìÅ Models
  /onlyfans/organizations/{orgId}/models:
    get:
      tags: [Models]
      summary: Model list
      description: Get all models for an organization
      security:
        - apiKeyAuth: []
      parameters:
        - name: orgId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Models retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Model'

    post:
      tags: [Models]
      summary: Connect models
      description: Connect a new OnlyFans model to an organization
      security:
        - apiKeyAuth: []
      parameters:
        - name: orgId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                authToken:
                  type: string
              required:
                - username
                - authToken
      responses:
        '201':
          description: Model connected successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Model'

  /onlyfans/models/{modelId}/reconnect:
    post:
      tags: [Models]
      summary: Reconnect models
      description: Reconnect an existing model with new credentials
      security:
        - apiKeyAuth: []
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                authToken:
                  type: string
              required:
                - authToken
      responses:
        '200':
          description: Model reconnected successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      status:
                        type: string
                      lastConnected:
                        type: string
                        format: date-time

  # üìÅ Fans
  /onlyfans/models/{modelId}/fans/info:
    get:
      tags: [Fans]
      summary: Get user profile
      description: Get detailed information about a specific fan
      security:
        - apiKeyAuth: []
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
        - name: user_id
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Fan profile retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Fan'

  # üìÅ Messages
  /onlyfans/models/{modelId}/chats:
    get:
      tags: [Messages]
      summary: Get all chat list
      description: Get all chat conversations for a model
      security:
        - apiKeyAuth: []
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
      responses:
        '200':
          description: Chat list retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Chat'

  /onlyfans/models/{modelId}/chats/{chatId}/messages:
    get:
      tags: [Messages]
      summary: Get model-wise and chat-wise message list
      description: Get messages from a specific chat conversation
      security:
        - apiKeyAuth: []
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
        - name: chatId
          in: path
          required: true
          schema:
            type: string
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
      responses:
        '200':
          description: Messages retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Message'

  # üìÅ Statements
  /onlyfans/models/{modelId}/payouts/transactions:
    get:
      tags: [Statements]
      summary: Earnings
      description: Get earning transactions for a model
      security:
        - apiKeyAuth: []
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Earnings retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Earnings'

  /onlyfans/models/{modelId}/payouts/statistics:
    get:
      tags: [Statements]
      summary: Earnings statistics
      description: Get earnings statistics for a model
      security:
        - apiKeyAuth: []
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
        - name: startDate
          in: query
          schema:
            type: string
            format: date
        - name: endDate
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Earnings statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      totalEarned:
                        type: number
                      totalPaid:
                        type: number
                      pendingPayouts:
                        type: number

  /onlyfans/models/{modelId}/payouts/requests/referral:
    get:
      tags: [Statements]
      summary: Referral details
      description: Get referral payout details for a model
      security:
        - apiKeyAuth: []
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Referral details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        amount:
                          type: number
                        status:
                          type: string
                        requestedAt:
                          type: string
                          format: date-time

  # üìÅ My Profile
  /onlyfans/models/{modelId}/users/me:
    get:
      tags: [My Profile]
      summary: Get model details
      description: Get detailed information about a model
      security:
        - apiKeyAuth: []
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Model details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Model'

  # üìÅ Statistics
  /onlyfans/models/{modelId}/payouts/balances:
    get:
      tags: [Statistics]
      summary: Get balances
      description: Get current payout balances for a model
      security:
        - apiKeyAuth: []
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Balances retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      availableBalance:
                        type: number
                      pendingBalance:
                        type: number
                      totalEarned:
                        type: number

  /onlyfans/models/{modelId}/statistics/overview:
    get:
      tags: [Statistics]
      summary: Overview statistics
      description: Get comprehensive overview statistics for a model
      security:
        - apiKeyAuth: []
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
        - name: startDate
          in: query
          schema:
            type: string
            format: date
        - name: endDate
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Overview statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Statistics'

  /onlyfans/models/{modelId}/stats/reach:
    get:
      tags: [Statistics]
      summary: Reach statistics
      description: Get reach and engagement statistics for a model
      security:
        - apiKeyAuth: []
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
        - name: startDate
          in: query
          schema:
            type: string
            format: date
        - name: endDate
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Reach statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      totalViews:
                        type: integer
                      uniqueVisitors:
                        type: integer
                      averageSessionDuration:
                        type: number

  /onlyfans/models/{modelId}/stats/reach/by-country:
    get:
      tags: [Statistics]
      summary: Reach by country
      description: Get reach statistics broken down by country
      security:
        - apiKeyAuth: []
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
        - name: startDate
          in: query
          schema:
            type: string
            format: date
        - name: endDate
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Reach by country statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      countryData:
                        type: array
                        items:
                          type: object
                          properties:
                            country:
                              type: string
                            views:
                              type: integer
                            uniqueVisitors:
                              type: integer

  /onlyfans/models/{modelId}/stats/fans:
    get:
      tags: [Statistics]
      summary: Fans statistics
      description: Get fan-related statistics for a model
      security:
        - apiKeyAuth: []
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
        - name: startDate
          in: query
          schema:
            type: string
            format: date
        - name: endDate
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Fan statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      totalFans:
                        type: integer
                      activeFans:
                        type: integer
                      newFansThisMonth:
                        type: integer
                      churnedFans:
                        type: integer

  /onlyfans/models/{modelId}/stats/fans/top:
    get:
      tags: [Statistics]
      summary: Top fans list
      description: Get the top fans by spending for a model
      security:
        - apiKeyAuth: []
      parameters:
        - name: modelId
          in: path
          required: true
          schema:
            type: string
        - name: startDate
          in: query
          schema:
            type: string
            format: date
        - name: endDate
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Top fans list retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        username:
                          type: string
                        displayName:
                          type: string
                        totalSpent:
                          type: number
                        joinDate:
                          type: string
                          format: date-time